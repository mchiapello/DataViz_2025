---
title: "Data Visualization con ggplot2"
subtitle: "Guida agli Esercizi Pratici"
author: "Marco Chiapello"
format: 
  revealjs:
    theme: simple
    transition: slide
    slide-number: true
    chalkboard: true
    logo: images/ggplot2_logo.jpg
    footer: "REVELO Training - Data Viz 2025"
    css: presentation-style.css
    title-slide-attributes:
      data-background-image: images/frequency-wave-7776034_1280.jpg
      data-background-size: cover
      data-background-opacity: "0.1"
    menu:
      side: left
      width: normal
      numbers: true
    include-after-body: 
      text: |
        <div class="home-button" style="position: fixed; top: 10px; left: 10px; z-index: 100;">
          <a href="https://mchiapello.github.io/DataViz_2025/" style="padding: 10px 20px; background-color: #4CAF50; color: white; text-decoration: none; border-radius: 5px; font-size: 16px;">‚åÇ Home</a>
        </div>
resources:
  - images/
  - presentation-style.css
---

## Benvenuti agli Esercizi! {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.85em;"}
Questa presentazione vi guider√† attraverso gli esercizi pratici del corso.

**Struttura:**

- üìÅ File `.R` con esercizi pratici
- üìÅ File `_SOLUTIONS.R` con le soluzioni
- üéØ Obiettivi chiari per ogni esercizio
- üí° Suggerimenti per aiutarvi

**Come procedere:**

1. Aprite il file R corrispondente
2. Leggete l'obiettivo dell'esercizio
3. Scrivete il codice
4. Verificate il risultato
5. Confrontate con le soluzioni
:::

## Approccio Pratico {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.85em;"}
**Imparare Facendo**

::: {.incremental}
- Non abbiate paura di sbagliare
- Sperimentate con variazioni
- Chiedete aiuto quando necessario
- Confrontatevi con i compagni
- Le soluzioni sono una guida, non l'unica via
:::

**Ricordate:**

> "La pratica rende perfetti. Ogni errore √® un'opportunit√† di apprendimento!"
:::

# Modulo 4: Geometrie Base {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

## File: `04_geometrie_base_exercises.R` {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.8em;"}
**30 esercizi suddivisi in 6 parti:**

1. **Relazioni tra Variabili** (Es. 1-6)
   - Scatter plots, trend lines, time series

2. **Distribuzioni - 1 Variabile** (Es. 7-12)
   - Histograms, density plots, frequency polygons

3. **Distribuzioni - 2 Variabili** (Es. 13-16)
   - Bin2D, hexbin, density 2D

4. **Statistiche Riassuntive** (Es. 17-21)
   - Boxplots, violin plots, bar charts

5. **Incertezza e Intervalli** (Es. 22-24)
   - Error bars, pointrange, ribbons

6. **Combinazioni Avanzate** (Es. 25-30)
:::

## Parte 1: Relazioni tra Variabili {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 1-4: Scatter Plots**

- Es. 1: Scatter plot base (`displ` vs `hwy`)
- Es. 2: Ridurre overplotting con `alpha`
- Es. 3: Aggiungere trend lineare
- Es. 4: Confrontare trend lineare vs LOESS

**Esercizi 5-6: Series Temporali**

- Es. 5: Line plot con `economics`
- Es. 6: `geom_path()` vs `geom_line()`

**Obiettivo:** Imparare a visualizzare relazioni tra variabili continue
:::

## Parte 2: Distribuzioni (1 Variabile) {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 7-12: Visualizzare Distribuzioni**

- Es. 7-8: Histograms e sperimentare con `bins`
- Es. 9-10: Density plots e combinazioni
- Es. 11: Frequency polygon
- Es. 12: Dotplot per dataset piccoli

**Concetti chiave:**

- Scegliere il numero giusto di bins
- Quando usare density vs histogram
- Combinare geometrie diverse

**Dataset:** `diamonds`, `mpg`, `faithful`
:::

## Parte 3: Distribuzioni (2 Variabili) {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 13-16: Big Data Solutions**

- Es. 13: `geom_bin2d()` per dati densi
- Es. 14: `geom_hex()` come alternativa
- Es. 15: Contorni di densit√† 2D
- Es. 16: Mappe di calore con densit√†

**Quando usare:**

- Dataset molto grandi
- Overplotting severo
- Identificare zone di alta densit√†

**Attenzione:** Es. 14 richiede il pacchetto `hexbin`
:::

## Parte 4: Statistiche Riassuntive {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 17-21: Confronti tra Gruppi**

- Es. 17-18: Boxplot vs Violin plot
- Es. 19: Combinare geometrie (violin + boxplot)
- Es. 20: Bar chart per conteggi
- Es. 21: `geom_col()` per dati aggregati

**Abilit√† da acquisire:**

- Scegliere visualizzazione appropriata
- Interpretare mediane e quartili
- Preparare dati per `geom_col()`

**Tip:** `geom_bar()` conta automaticamente, `geom_col()` usa valori gi√† aggregati
:::

## Parte 5: Incertezza e Intervalli {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 22-24: Visualizzare l'Incertezza**

- Es. 22: Error bars con deviazione standard
- Es. 23: `geom_pointrange()` compatto
- Es. 24: `geom_ribbon()` per serie temporali

**Importanza:**

- Comunicare l'incertezza nei dati
- Mostrare intervalli di confidenza
- Visualizzare range di valori

**Dataset:** Utilizza dati aggregati con statistiche riassuntive
:::

## Parte 6: Combinazioni Avanzate {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 25-30: Multi-layer Plots**

- Es. 25: `geom_rug()` + punti + smooth
- Es. 26: Histogram sovrapposti con frequency polygon
- Es. 27: Boxplot orizzontale
- Es. 28: Density 2D + punti
- Es. 29: Smooth con CI personalizzato
- Es. 30: Boxplot con notch

**Challenge:** Combinare 3+ geometrie in modo efficace e leggibile
:::

# Modulo 5: Estetiche e Mappature {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

## File: `05_estetiche_mappature_exercises.R` {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.8em;"}
**30 esercizi suddivisi in 6 parti:**

1. **Color Aesthetic** (Es. 1-5)
   - Discreto, continuo, palette

2. **Fill Aesthetic** (Es. 6-10)
   - Bar charts, density, histograms

3. **Size e Shape** (Es. 11-15)
   - Mappature multiple

4. **Alpha (Trasparenza)** (Es. 16-21)
   - Gestire overplotting

5. **Mapping vs Setting** (Es. 22-25)
   - Differenze fondamentali

6. **Combinazioni Avanzate** (Es. 26-30)
:::

## Parte 1: Color Aesthetic {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 1-5: Colore come Variabile Visiva**

- Es. 1: Color per variabile discreta (`drv`)
- Es. 2: Color per variabile continua (`cty`)
- Es. 3: Colorare linee per anno
- Es. 4: Palette Viridis
- Es. 5: Gradient personalizzato

**Concetti:**

- Differenza tra colore discreto e continuo
- Scegliere palette appropriate
- Accessibilit√† dei colori

**Scale:** `scale_color_*()` per punti e linee
:::

## Parte 2: Fill Aesthetic {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 6-10: Riempimento per Aree**

- Es. 6: Fill per bar chart
- Es. 7: Density con fill + alpha
- Es. 8: Color (bordo) e fill insieme
- Es. 9: Histogram con position dodge
- Es. 10: Boxplot con fill

**Differenza fondamentale:**

- `color`: bordi di forme e colore di punti/linee
- `fill`: riempimento interno di aree

**Scale:** `scale_fill_*()` per aree
:::

## Parte 3: Size e Shape {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 11-15: Dimensione e Forma**

- Es. 11: Size continuo basato su `cyl`
- Es. 12: Combinare size + color
- Es. 13: Shape discreto per `drv`
- Es. 14: Ridondanza shape + color
- Es. 15: Shape personalizzato (21-25)

**Best Practices:**

- Size per variabili quantitative
- Shape per max 6 categorie
- Forme 21-25 hanno bordo E riempimento

**Accessibilit√†:** Ridondanza aiuta daltonici
:::

## Parte 4: Alpha (Trasparenza) {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 16-21: Gestire la Trasparenza**

- Es. 16: Alpha fisso per overplotting massivo
- Es. 17: Alpha come variabile
- Es. 18: Alpha con density plots
- Es. 19: Alpha in ribbons
- Es. 20: Jitter con alpha
- Es. 21: Boxplot + punti sovrapposti

**Uso strategico:**

- Alpha basso (0.1-0.3) per dati densi
- Alpha medio (0.4-0.6) per sovrapposizioni
- Alpha come variabile (raro ma possibile)
:::

## Parte 5: Mapping vs Setting {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.7em;"}
**Esercizi 22-25: Errore Comune da Evitare!**

- Es. 22: Identificare l'errore `color = "blue"` in `aes()`
- Es. 23: Mapping corretto + setting
- Es. 24: Mix di mapping e setting
- Es. 25: Position dodge con fill

**Regola d'oro:**

::: {.callout-important}
## DENTRO vs FUORI aes()

- **DENTRO `aes()`**: Mapping da **variabile** a estetica
- **FUORI `aes()`**: Setting di valore **fisso**

```r
# CORRETTO
aes(x = displ, color = class) + geom_point(size = 3)

# SBAGLIATO
aes(x = displ, color = "blue") + geom_point()
```
:::
:::

## Parte 6: Combinazioni Avanzate {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 26-30: Multidimensionalit√†**

- Es. 26: Quattro variabili (x, y, color, size)
- Es. 27: Ridondanza per accessibilit√†
- Es. 28: Bubble chart
- Es. 29: Gradient divergente con punto centrale
- Es. 30: Massima complessit√† (5 variabili)

**Attenzione:**

- Non sovraccaricare il grafico
- Mantenere leggibilit√†
- Considerare il pubblico

**Limite consigliato:** Max 4-5 estetiche mappate
:::

# Modulo 7: Facets e Coordinate {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

## File: `07_facets_coordinate_exercises.R` {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.8em;"}
**30 esercizi suddivisi in 6 parti:**

1. **Facet Wrap Basics** (Es. 1-5)
2. **Facet Grid** (Es. 6-10)
3. **Scale Control** (Es. 11-15)
4. **Coordinate Systems** (Es. 16-20)
5. **Coordinate Transformations** (Es. 21-25)
6. **Combinazioni Avanzate** (Es. 26-30)

**Concetto chiave:** Small multiples per confronti efficaci
:::

## Parte 1-2: Faceting {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Facet Wrap (Es. 1-5):**

- Layout automatico flessibile
- Controllo numero colonne
- Una variabile di faceting
- Esempi: time series per decade

**Facet Grid (Es. 6-10):**

- Layout matriciale strutturato
- Due variabili (righe √ó colonne)
- Formula: `righe ~ colonne`
- Alternativa: `vars()` notation

**Quando usare cosa:**

- Wrap: numero variabile di pannelli
- Grid: confronti strutturati 2D
:::

## Parte 3: Scale Control {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 11-15: Gestire gli Assi**

- Es. 11: Scale fisse (default)
- Es. 12: `scales = "free"` (X e Y liberi)
- Es. 13: `scales = "free_x"` (solo X)
- Es. 14: `scales = "free_y"` (solo Y)
- Es. 15: Quando NON usare free scales

**Trade-off importante:**

- Scale fisse: facile confronto tra pannelli
- Scale libere: dettaglio ottimizzato per pannello
- Dipende dall'obiettivo analitico

**Attenzione:** Free scales pu√≤ ingannare!
:::

## Parte 4: Coordinate Systems {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 16-20: Sistemi di Coordinate**

- Es. 16: `coord_flip()` per labels lunghe
- Es. 17: `coord_cartesian()` per zoom corretto
- Es. 18: `coord_fixed()` per aspect ratio 1:1
- Es. 19: `coord_polar()` per pie chart
- Es. 20: Radar/bullseye chart

**Funzioni chiave:**

- `coord_flip()`: scambia X e Y
- `coord_cartesian()`: zoom senza perdere dati
- `coord_fixed()`: aspect ratio fisso
- `coord_polar()`: coordinate polari

**Nota:** Evitate pie charts quando possibile!
:::

## Parte 5: Trasformazioni {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 21-25: Scale vs Coord**

- Es. 21: `scale_*_log10()` 
- Es. 22: `coord_trans()` alternativa
- Es. 23: Trasformazione sqrt
- Es. 24: Impatto su smooth lines
- Es. 25: `xlim()` vs `coord_cartesian()`

**Differenza critica:**

- `scale_*()`: trasforma PRIMA delle statistiche
- `coord_trans()`: trasforma DOPO le statistiche
- `xlim()`: **rimuove** dati fuori range
- `coord_cartesian()`: **zoom** visivo

**Regola:** Usate `coord_cartesian()` per zoom sicuro
:::

## Parte 6: Combinazioni {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 26-30: Tecniche Integrate**

- Es. 26: Facets + coord_flip
- Es. 27: Facets + zoom
- Es. 28: Facets + free scales + log
- Es. 29: Grid + multiple aesthetics
- Es. 30: Best practice showcase

**Best Practice Finale:**

- Combinate tecniche con criterio
- Mantenete leggibilit√†
- Usate annotazioni (vlines, hlines)
- Testate su pubblico reale

**Challenge:** Creare small multiples informativi e belli
:::

# Modulo 8: Scale e Trasformazioni {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

## File: `08_scale_trasformazioni_exercises.R` {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.8em;"}
**30+ esercizi suddivisi in 6 parti:**

1. **Scale Continue** (5 esercizi)
2. **Trasformazioni** (5 esercizi)
3. **Scale Colore Discrete** (5 esercizi)
4. **Scale Colore Continue** (5 esercizi)
5. **Scale Dimensione e Forma** (5 esercizi)
6. **Formattazione Avanzata** (5 esercizi + bonus)

**Richiede:** `library(scales)` per formattazione
:::

## Parte 1: Scale Continue {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 1-5: Controllare Assi Numerici**

- Limiti e breaks personalizzati
- `coord_cartesian()` vs `limits`
- Expand e padding
- Breaks custom
- Combinare pi√π parametri

**Parametri chiave:**

- `limits`: range dell'asse
- `breaks`: posizione tick marks
- `labels`: testo etichette
- `expand`: padding ai bordi

**Ricorda:** `coord_cartesian()` non altera statistiche!
:::

## Parte 2: Trasformazioni {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 6-10: Trasformare i Dati**

- Log10 per relazioni esponenziali
- Sqrt per conteggi
- Reverse per ranking
- Trasformazioni con breaks custom

**Quando usare:**

- **Log**: crescita esponenziale, ordini di grandezza
- **Sqrt**: varianza proporzionale a media (conteggi)
- **Reverse**: classifiche (migliore ‚Üí peggiore)

**Best Practice:** Mantenere interpretabilit√† delle scale
:::

## Parte 3-4: Scale Colori {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.7em;"}
**Discrete (Es. 11-15):**

- ColorBrewer qualitative
- Viridis discrete
- Colori manuali
- Invertire palette
- Consistenza color + fill

**Continue (Es. 16-20):**

- Gradient 2 colori
- Viridis continuous
- Diverging (gradient2)
- Gradientn (multipli colori)
- Limiti e breaks colori

**Accessibilit√†:**

::: {.callout-tip}
## Palette Consigliate
- **Viridis**: ottima per daltonici + stampa B/N
- **ColorBrewer**: testata per accessibilit√†
- **Evitare:** rosso-verde classico
:::
:::

## Parte 5: Size e Shape {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 21-25: Dimensioni e Forme**

- `scale_size()` vs `scale_size_area()`
- Gestire valori zero
- Shape manual
- Filled shapes (21-25)
- Combinare size + color

**Percettivit√†:**

- `scale_size_area()` √® **sempre** preferibile
- Area proporzionale al valore (non raggio)
- Verifica che zero ‚Üí zero area

**Forme speciali:** 21-25 hanno bordo + riempimento (doppio controllo)
:::

## Parte 6: Formattazione Avanzata {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 26-30: Package `scales`**

- `scales::comma` per separatori migliaia
- `scales::percent` per percentuali
- `scales::dollar` per valute
- Formattazione date
- Labels custom con funzioni

**Funzioni utili:**

```r
scale_y_continuous(labels = scales::comma)
scale_y_continuous(labels = scales::percent)
scale_y_continuous(labels = scales::dollar)
scale_x_date(date_labels = "%b %Y")
```

**Esercizi Bonus:** Grafici publication-ready completi
:::

# Modulo 9: Temi e Personalizzazione {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

## File: `09_themes_personalizzazione_exercises.R` {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.8em;"}
**30 esercizi suddivisi in 6 parti:**

1. **Temi Predefiniti** (5 esercizi)
2. **Funzione theme() Basics** (5 esercizi)
3. **Funzioni element_*()** (5 esercizi)
4. **Labels e Titoli** (5 esercizi)
5. **Personalizzazione Legende** (5 esercizi)
6. **Temi Custom e Export** (5 esercizi)

**Focus:** Aspetto professionale dei grafici
:::

## Parte 1: Temi Predefiniti {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 1-5: Temi Built-in**

- `theme_gray()`: default di ggplot2
- `theme_minimal()`: pulito, moderno
- `theme_classic()`: pubblicazioni scientifiche
- `theme_bw()`: bianco e nero, stampa
- `theme_void()`: minimalista estremo
- `theme_dark()`: presentazioni

**Contesti d'uso:**

- Pubblicazioni: `theme_classic()` o `theme_bw()`
- Presentazioni: `theme_minimal()` o `theme_dark()`
- Web: `theme_minimal()`
- Esplorativa: default va bene

**Tip:** Tutti accettano `base_size` per scala globale
:::

## Parte 2-3: theme() e element_*() {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.7em;"}
**Anatomia della Funzione theme():**

Ogni elemento grafico controllabile con `element_*()`:

- `element_text()`: testo (size, face, color, angle, hjust, vjust)
- `element_line()`: linee (color, size, linetype)
- `element_rect()`: rettangoli (fill, color, size)
- `element_blank()`: rimuovere elemento

**Elementi principali:**

```r
theme(
  plot.title = element_text(...),      # Titolo
  axis.text.x = element_text(...),     # Labels asse X
  axis.line = element_line(...),       # Linee assi
  panel.background = element_rect(...), # Sfondo pannello
  panel.grid.major = element_line(...), # Griglia
  legend.position = "bottom"            # Posizione legenda
)
```
:::

## Parte 4: Labels e Titoli {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 14-18: Annotazioni Complete**

Funzione `labs()` per tutti i testi:

```r
labs(
  title = "Titolo Principale",
  subtitle = "Sottotitolo descrittivo",
  caption = "Fonte: Dataset X",
  x = "Asse X",
  y = "Asse Y",
  color = "Legenda colori",
  fill = "Legenda riempimento"
)
```

**Best Practices:**

- Titolo: chiaro e informativo
- Subtitle: contesto aggiuntivo
- Caption: fonte dati, note metodologiche
- Assi: unit√† di misura incluse
:::

## Parte 5: Legende {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 19-23: Controllo Legende**

**Posizionamento:**

- `legend.position = "none"`: rimuovi
- `"top"`, `"bottom"`, `"left"`, `"right"`: bordi
- `c(x, y)`: coordinate 0-1 dentro il plot

**Personalizzazione:**

- `legend.direction`: "horizontal" o "vertical"
- `legend.title`: element_text() per titolo
- `legend.text`: element_text() per labels
- `legend.background`: element_rect() per sfondo

**guides():** override aesthetics nelle chiavi
:::

## Parte 6: Temi Custom e Export {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 24-30: Professionalit√†**

**Creare tema riutilizzabile:**

```r
theme_mio <- function() {
  theme_minimal() +
  theme(
    plot.title = element_text(size = 16, face = "bold"),
    axis.text = element_text(size = 12),
    legend.position = "bottom"
  )
}
```

**Export con ggsave():**

```r
ggsave("plot.png", width = 10, height = 6, dpi = 300)
ggsave("plot.pdf", width = 10, height = 6)
```

**DPI consigliati:** 72 (web), 150 (presentazioni), 300 (pubblicazioni)
:::

# Modulo 10: Visualizzazioni Avanzate {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

## File: `10_visualizzazioni_avanzate_exercises.R` {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.8em;"}
**30 esercizi suddivisi in 6 parti:**

1. **Patchwork Base** (6 esercizi)
2. **Patchwork Avanzato** (6 esercizi)
3. **ggrepel** (4 esercizi)
4. **Heatmaps** (6 esercizi)
5. **Volcano Plots** (6 esercizi)
6. **Combinazioni Avanzate** (2 esercizi)

**Pacchetti richiesti:** `patchwork`, `ggrepel`
:::

## Parte 1-2: Patchwork {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Combinare Grafici - Sintassi Intuitiva:**

```r
# Operatori base
p1 + p2           # Affiancati
p1 / p2           # Sovrapposti
(p1 + p2) / p3    # Layout complesso

# Controllo layout
p1 + p2 + plot_layout(widths = c(2, 1))
p1 + p2 + plot_layout(guides = "collect")

# Annotazioni globali
(p1 + p2) + plot_annotation(
  title = "Multi-panel",
  tag_levels = "A"
)

# Tema globale
(p1 + p2) & theme_minimal()
```

**Es. 10:** Design custom con stringhe `"AAB\nCCC"`
:::

## Parte 3: ggrepel {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 13-16: Labels Senza Sovrapposizioni**

**Problema:** `geom_text()` sovrappone le etichette

**Soluzione:** `ggrepel` con algoritmi intelligenti

```r
# Testo semplice
geom_text_repel(aes(label = name))

# Box con sfondo
geom_label_repel(aes(label = name),
                 box.padding = 0.5,
                 point.padding = 0.3)

# Controllo direzione
geom_text_repel(direction = "y")  # solo verticale
```

**Use case:** Scatter plots con molti punti da etichettare
:::

## Parte 4: Heatmaps {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 17-22: Mappe di Calore**

**Pipeline completa:**

1. Dati ‚Üí formato long (`pivot_longer()`)
2. Scalare per variabile (Z-score)
3. `geom_tile()` per heatmap
4. Scala colori divergente
5. Personalizzazione estetica

```r
data_long %>%
  group_by(variable) %>%
  mutate(value_scaled = scale(value)[,1]) %>%
  ggplot(aes(x = variable, y = id, fill = value_scaled)) +
  geom_tile(color = "white") +
  scale_fill_gradient2(low = "blue", mid = "white", high = "red")
```

**Tip:** Ruotare labels asse X per leggibilit√†
:::

## Parte 5: Volcano Plots {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.7em;"}
**Esercizi 23-28: Gene Expression Analysis**

**Anatomia Volcano Plot:**

- **Asse X:** log2(Fold Change)
- **Asse Y:** -log10(p-value adjusted)
- **Colore:** Significativit√†

```r
volcano_data %>%
  mutate(
    significant = abs(log2FC) > 1 & padj < 0.05,
    regulation = case_when(
      log2FC > 1 & padj < 0.05 ~ "Up",
      log2FC < -1 & padj < 0.05 ~ "Down",
      TRUE ~ "NS"
    )
  ) %>%
  ggplot(aes(x = log2FC, y = -log10(padj), color = regulation)) +
  geom_point(alpha = 0.5) +
  geom_vline(xintercept = c(-1, 1), linetype = "dashed") +
  geom_hline(yintercept = -log10(0.05), linetype = "dashed")
```

**Es. 28:** Etichettare top genes con `ggrepel`
:::

## Parte 6: Integrazioni {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Esercizi 29-30: Dashboard Completi**

**Challenge finale:**

- Combinare volcano plot + bar chart categorie
- Multi-panel con 4+ grafici
- Layout custom con patchwork
- Tema unificato
- Annotazioni globali

**Obiettivo:**

Creare visualizzazioni publication-ready che raccontano una storia completa con i dati

**Esempi:** Supplementary figures per paper scientifici
:::

## Suggerimenti per il Successo {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.8em;"}
**Workflow Consigliato:**

1. **Leggete l'obiettivo** prima di guardare i suggerimenti
2. **Provate da soli** - l'errore √® apprendimento
3. **Consultate la documentazione** (`?funzione`)
4. **Chiedete aiuto** ai compagni o istruttore
5. **Confrontate con le soluzioni** dopo aver provato
6. **Sperimentate variazioni** - non fermatevi alla soluzione

::: {.callout-tip}
## Ricordate
"The best way to learn ggplot2 is to learn by doing, make mistakes, google the error messages, and keep trying!" - Hadley Wickham
:::
:::

## Risorse Aggiuntive {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 0.75em;"}
**Documentazione:**

- [ggplot2 documentation](https://ggplot2.tidyverse.org/)
- [R Graph Gallery](https://r-graph-gallery.com/)
- [ggplot2 extensions](https://exts.ggplot2.tidyverse.org/)

**Cheat Sheets:**

- [ggplot2 Cheat Sheet](https://github.com/rstudio/cheatsheets)
- [scales Cheat Sheet](https://scales.r-lib.org/)

**Libri:**

- "ggplot2: Elegant Graphics for Data Analysis" - Hadley Wickham
- "R Graphics Cookbook" - Winston Chang

**Community:**

- Stack Overflow tag `[ggplot2]`
- RStudio Community
:::

## Domande? {background-image="images/frequency-wave-7776034_1280.jpg" background-size="cover" background-opacity="0.1"}

::: {style="font-size: 1.2em; text-align: center;"}
<br><br>

**Buon lavoro con gli esercizi!**

<br>

üíª Aprite i file `.R` e iniziate a sperimentare

üéØ Ricordate: la pratica √® essenziale

ü§ù Collaborate e condividete

<br><br>

**Ci vediamo per la discussione delle soluzioni!**
:::
